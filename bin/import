const fs = require('fs');
const mongoose = require('mongoose');
// db connect
mongoose.connect('mongodb://localhost:27017/places', {
  useNewUrlParser: true,
  useCreateIndex: true,
  useFindAndModify: false,
  useUnifiedTopology: true,
});
const User = require('../models/user');
const Card = require('../models/card');

const db = mongoose.connection;
db.on('error', console.error.bind(console, 'connection error:'));
db.once('open', () => {
  console.log('connected ');
});

const userData = fs.readFileSync('./data/user.json');
const users = JSON.parse(userData);
User.insertMany(users);
console.log(`Было импортировано ${users.length} записей`);

const cardData = fs.readFileSync('./data/card.json');
const cards = JSON.parse(cardData);
Card.insertMany(cards);
console.log(`Было импортировано ${cards.length} записей`);
process.exit(0);
